I need you to create a design doc to do the following
<task>
$ARGUMENTS
</task>

In doing this use the following steps:
Step 1: Explore the code base and to understand how this task will fit into the existing code.
    - make heavy use of subagents (Agent tool) here and tell them to ultrathink as hard as possible on their subtask.
    - create TODOs to track what you understand and what you still need to learn

Step 2: ultrathink as hard as you can on the ideal plan to implement this feature in a way that would pass production grade code review
    - Consider what refactors (if any) may be required keeping in mind we want to avoid code debt in any planned implementation
    - Remember also that backwards compatibility is never a requirement
    - save your plan as a .md file

